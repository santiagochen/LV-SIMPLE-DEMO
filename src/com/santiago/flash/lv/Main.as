package com.santiago.flash.lv {		import flash.display.MovieClip;	import flash.display.Loader;	import flash.net.URLRequest;	import flash.events.Event;	import flash.utils.Dictionary;	import com.greensock.TweenMax;	import flash.events.MouseEvent;	import flash.ui.MouseCursor;	import flash.ui.Mouse;	import flash.net.*;	import flash.display.Sprite;	import flash.text.TextField;	import flash.text.TextFormat;	import fl.video.MetadataEvent;		public class Main extends MovieClip {		//static const qrPic:String = "qrpic.jpg";		private var qrPic:Object = {link:"qrpic2.jpg", width:152, height:199};		private var wsharQr:Object = {link:"qrpic_wshare.png", width:199, height:199};		static const iconGapX:Number = 5;		static const iconHolderX:Number = 300;		static const iconHolderY:Number = 480;		static const pauseBtnX:Number = 384;		static const pauseBtnY:Number = 240;		private var iconPosX:Number = 0;		private var iconNameArr: Array = [										  {name:"lv.png",w:40,h:40},										  {name:"app.png",w:40,h:40},										  {name:"weibo.png",w:40,h:40}, 										  {name:"youku.png",w:40,h:40},										  {name:"qr.png",w:40,h:40},										  {name:"weixin.png",w:40,h:40},										  ];		private var iconHolder:MovieClip = new MovieClip();		private var pauseBtn:Loader = new Loader()		private var pauseHolder:MovieClip = new MovieClip();		private var qrPanel:Sprite;		private var qrPanelBg:Sprite;		private var allready:Number = 0;				private var passCutPoint:Boolean = false;				public function Main() {			 resolveIconArr(iconNameArr)			 pauseBtn.load(new URLRequest("resumecn.png"));						//var ss:MetadataEvent(MetadataEvent.CUE_POINT)			this.myplayer.addEventListener(MetadataEvent.CUE_POINT, onCue);					}				private function onCue(event:MetadataEvent):void{			passCutPoint = true;			}				private function resolveIconArr(arr:Array){			for(var i:int = 0; i<arr.length; i++){				var loader:Loader = new Loader();				loader.load(new URLRequest(arr[i].name));				loader.name = arr[i].name;				loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaderCom);				iconHolder.addChild(loader);				loader.addEventListener(MouseEvent.CLICK, iconClick);				loader.x = iconPosX;				iconPosX += arr[i].w+iconGapX;								}			}				private function onLoaderCom(event:Event):void{			allready++;			if(allready==iconNameArr.length){				var blankOver:MovieClip = new MovieClip();				blankOver.graphics.beginFill(0xffffff,0);				blankOver.graphics.drawRect(0,0,860,520);				blankOver.graphics.endFill();				this.addChild(blankOver);				stage.addEventListener(MouseEvent.MOUSE_OVER, userOver);				stage.addEventListener(MouseEvent.MOUSE_OUT, userOut);								this.addChild(iconHolder);				iconHolder.alpha = 0;				iconHolder.x = iconHolderX;				iconHolder.y = iconHolderY;				//iconHolder.alpha = 1;				//iconHolder.mouseChildren = false;				makeButton(iconHolder);				//iconHolder.addEventListener(MouseEvent.MOUSE_OVER, iconHolderOver);				//iconHolder.addEventListener(MouseEvent.MOUSE_OUT, iconHolderOut);				}			}					private function iconHolderOver(event:MouseEvent):void{			Mouse.cursor = MouseCursor.BUTTON;			}		private function iconHolderOut(event:MouseEvent):void{			Mouse.cursor = MouseCursor.AUTO;			}				private function userOver(event:MouseEvent):void{			if(passCutPoint==true){				TweenMax.to(iconHolder,0.1,{alpha:1,x:iconHolderX,y:iconHolderY});				}						}		private function userOut(event:MouseEvent):void{			TweenMax.to(iconHolder,0.1,{alpha:0,x:iconHolderX,y:iconHolderY});			}				private function iconClick(event:MouseEvent):void{									stage.removeEventListener(MouseEvent.MOUSE_OVER, userOver);			stage.removeEventListener(MouseEvent.MOUSE_OUT, userOut);						pauseHolder.graphics.beginFill(0xffffff,0);			pauseHolder.graphics.drawRect(0,0,860,520);			pauseHolder.graphics.endFill();			this.addChild(pauseHolder);			pauseBtn.x = pauseBtnX;			pauseBtn.y = pauseBtnY;			makeButton(pauseBtn);			//pauseHolder.addChild(pauseBtn)			pauseBtn.addEventListener(MouseEvent.CLICK, clickResume);			pauseHolder.addEventListener(MouseEvent.CLICK, clickResume);			TweenMax.to(iconHolder,0.1,{alpha:0,x:iconHolderX,y:1000});						//this.myplayer.pause();						//OPEN NEWWINDOW			switch(event.target.name){				/*case "vos.png":				openPage("http://www.louisvuitton.cn/");				pauseHolder.addChild(pauseBtn)				break;*/				case "app.png":				openPage("https://itunes.apple.com");				//pauseHolder.addChild(pauseBtn)				break;				case "weibo.png":				openPage("http://service.weibo.com/share/share.php?title=What%20is%20a%20journey?%0DA%20journey%20is%20not%20a%20trip.It%92s%20not%20a%20vacation.%0DIt%92s%20a%20process,%20a%20discovery.%0DIt%92s%20a%20process%20of%20self-discovery.&pic=http://a0.att.hudong.com/24/49/01300000029584119988496829346.gif");				//pauseHolder.addChild(pauseBtn)				break;				case "lv.png":				//openPanel();				//pauseHolder.addChild(qrPanel);				openPage("http://www.louisvuitton.cn/");				qrPanel.x = 340;				qrPanel.y = 160;				break;				case "youku.png":				openPage("http://tvs.youku.com/LOUISVUITTON");				pauseHolder.addChild(pauseBtn)				break;				case "qr.png":				openPanel("qr.png");				pauseHolder.addChild(qrPanel);				this.myplayer.pause();				qrPanel.x = 340;				qrPanel.y = 160;				break;				case "weixin.png":				openPanel("weixin.png");				pauseHolder.addChild(qrPanel);				this.myplayer.pause();				qrPanel.x = 340;				qrPanel.y = 160;				break;				}									}		private function makeButton(tar:*):void{			tar.addEventListener(MouseEvent.MOUSE_OVER, iconHolderOver);			tar.addEventListener(MouseEvent.MOUSE_OUT, iconHolderOut);			}				private function clickResume(event:MouseEvent):void{			emptyChild(pauseHolder);			this.removeChild(pauseHolder);			stage.addEventListener(MouseEvent.MOUSE_OVER, userOver);			stage.addEventListener(MouseEvent.MOUSE_OUT, userOut);			this.myplayer.play();			}		private function openPage(link:String):void{			navigateToURL(new URLRequest(link),"_blank")			}		private function openPanel(str:String){			var qrShowed:Object;			switch(str){				case "weixin.png":				qrShowed = wsharQr;				break;				case "qr.png":				qrShowed = qrPic;				break;				}						qrPanel = new Sprite;						qrPanelBg = new Sprite;			qrPanelBg.graphics.beginFill(0xffffff,.1);			qrPanelBg.graphics.drawRect(0,0, qrShowed.width+20,qrShowed.height+60);			qrPanelBg.graphics.endFill();			qrPanel.addChild(qrPanelBg);									var loader:Loader = new Loader;			loader.load(new URLRequest(qrShowed.link));			loader.x = 10;			loader.y = 10;			qrPanel.addChild(loader);						var txt:TextField = new TextField;			txt.defaultTextFormat = new TextFormat("黑体",11,"0xffffff");			txt.x = (qrShowed.link=="qrpic2.jpg")?8:25;			txt.y = qrShowed.height+14;			txt.width = 200; 			txt.text = "扫瞄二维码关注LOUIS VUITTON";			qrPanel.addChild(txt);						var txtclose:TextField = new TextField;			txtclose.defaultTextFormat = new TextFormat("黑体",11,"0xffffff");			txtclose.text = "点击关闭";			//txtclose.width = 200; 			txtclose.y = qrShowed.height+32; txtclose.x = qrShowed.width/2-10;			qrPanel.addChild(txtclose);			txtclose.addEventListener(MouseEvent.CLICK, onTxtClose);			}					private function onTxtClose(event:MouseEvent):void{			emptyChild(pauseHolder);			this.removeChild(pauseHolder);			stage.addEventListener(MouseEvent.MOUSE_OVER, userOver);			stage.addEventListener(MouseEvent.MOUSE_OUT, userOut);			this.myplayer.play();			}				private function emptyChild(tar){			var num:Number = tar.numChildren;			for(var m:int=0; m<num;m++){				trace("m: "+m);				tar.removeChildAt(0);				}			}			}	}